<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cantinho do Empadão</title>

<style>

body{
font-family: 'Segoe UI', Arial, sans-serif;
margin:0;
background: linear-gradient(180deg,#5a2d0c,#3b1d08);
color:#fff;
}

header{
text-align:center;
padding:20px 10px 10px 10px;
}

header img{
width:180px;
max-width:90%;
margin-bottom:5px;
}

header h2{
margin:0;
font-size:20px;
font-weight:bold;
letter-spacing:1px;
}

.container{
padding:15px;
padding-bottom:110px;
}

.card{
background:#ffffff;
color:#333;
padding:18px;
margin-bottom:18px;
border-radius:15px;
box-shadow:0 6px 18px rgba(0,0,0,0.25);
transition:0.2s;
}

.card h4{
margin-top:0;
color:#5a2d0c;
}

input, select{
width:100%;
padding:10px;
margin-top:6px;
margin-bottom:10px;
border-radius:8px;
border:1px solid #ccc;
font-size:15px;
}

button{
flex:1;
background:#d4a017;
color:#000;
border:none;
padding:12px;
border-radius:12px;
cursor:pointer;
font-weight:bold;
font-size:15px;
box-shadow:0 4px 10px rgba(0,0,0,0.2);
transition:0.2s;
}

.nav-buttons{
display:flex;
gap:10px;
margin-top:25px;
}

.carrinho-total{
position:fixed;
bottom:0;
left:0;
right:0;
background:#d4a017;
color:#000;
padding:15px;
text-align:center;
font-weight:bold;
font-size:18px;
box-shadow:0 -4px 15px rgba(0,0,0,0.4);
}

.etapa{
display:none;
}

.etapa.ativa{
display:block;
}

.etapa h3{
border-left:4px solid #d4a017;
padding-left:10px;
}

</style>
</head>
<body>

<header>
<img src="Logoep.jpg">
<h2>Cantinho do Empadão</h2>
</header>

<div class="container">

<!-- ETAPA 1 -->
<div class="etapa ativa" id="etapa1">
<h3>Etapa 1 - Escolher Itens</h3>

<div class="card">
<h4>Empadão de Frango - R$18,99</h4>
<label><input type="checkbox" id="milho1"> Com milho</label>
<label><input type="checkbox" id="semMilho1"> Sem milho</label>
Quantidade:
<input type="number" id="qtd1" value="0" min="0">
</div>

<div class="card">
<h4>Combo Frango + Catupiry + Coca Lata - R$23,99</h4>
Quantidade:
<input type="number" id="qtd2" value="0" min="0">
</div>

<div class="card">
<h4>Combo Frango + Requeijão + Guaraná Lata - R$23,99</h4>
Quantidade:
<input type="number" id="qtd3" value="0" min="0">
</div>

<div class="nav-buttons">
<button onclick="proxima(2)">Próxima Etapa</button>
</div>
</div>

<!-- ETAPA 2 -->
<div class="etapa" id="etapa2">
<h3>Etapa 2 - Endereço</h3>

Nome:
<input type="text" id="nome">

Endereço:
<input type="text" id="endereco">

Bairro:
<input type="text" id="bairro">

Ponto de Referência:
<input type="text" id="referencia">

<div class="nav-buttons">
<button onclick="voltar(1)">Voltar</button>
<button onclick="proxima(3)">Próxima Etapa</button>
</div>
</div>

<!-- ETAPA 3 -->
<div class="etapa" id="etapa3">
<h3>Etapa 3 - Forma de Pagamento</h3>

<select id="pagamento" onchange="verificarPagamento()">
<option value="">Selecione</option>
<option value="Dinheiro">Dinheiro</option>
<option value="Pix">Pix</option>
</select>

<div id="trocoDiv" style="display:none;">
Precisa de troco?
<input type="text" id="troco">
</div>

<div id="pixDiv" style="display:none;">
Chave Pix: 21969592922<br>
⚠️ Enviar comprovante para o pedido ser preparado.
</div>

<div class="nav-buttons">
<button onclick="voltar(2)">Voltar</button>
<button onclick="proxima(4)">Próxima Etapa</button>
</div>
</div>

<!-- ETAPA 4 -->
<div class="etapa" id="etapa4">
<h3>Etapa 4 - Resumo do Pedido</h3>
<div id="resumo"></div>

<div class="nav-buttons">
<button onclick="voltar(3)">Voltar</button>
<button onclick="enviarPedido()">Finalizar Pedido</button>
</div>
</div>

</div>

<div class="carrinho-total">
Total: R$ <span id="total">0.00</span>
</div>

<script>

function proxima(num){
document.querySelectorAll('.etapa').forEach(e=>e.classList.remove('ativa'));
document.getElementById('etapa'+num).classList.add('ativa');
if(num==4) gerarResumo();
}

function voltar(num){
document.querySelectorAll('.etapa').forEach(e=>e.classList.remove('ativa'));
document.getElementById('etapa'+num).classList.add('ativa');
}

function verificarPagamento(){
let pag=document.getElementById('pagamento').value;
document.getElementById('trocoDiv').style.display=(pag=="Dinheiro")?"block":"none";
document.getElementById('pixDiv').style.display=(pag=="Pix")?"block":"none";
}

function calcular(){
let total=0;
total+=qtd1.value*18.99;
total+=qtd2.value*23.99;
total+=qtd3.value*23.99;
document.getElementById('total').innerText=total.toFixed(2);
return total;
}

document.querySelectorAll('input').forEach(i=>i.addEventListener('input',calcular));

function gerarResumo(){
let total=calcular();
let taxa=0;

if(bairro.value.toLowerCase()!="marambaia"){
taxa=5;
}

if(total<18){
alert("Pedido mínimo é R$18,00");
voltar(1);
return;
}

let final=total+taxa;

let resumoHTML="Itens:<br>";

if(qtd1.value>0){
let milho="";
if(milho1.checked) milho=" (com milho)";
if(semMilho1.checked) milho=" (sem milho)";
resumoHTML+=qtd1.value+"x Empadão"+milho+"<br>";
}

if(qtd2.value>0){
resumoHTML+=qtd2.value+"x Combo Catupiry<br>";
}

if(qtd3.value>0){
resumoHTML+=qtd3.value+"x Combo Requeijão<br>";
}

resumoHTML+="<br>Subtotal: R$"+total.toFixed(2);
if(taxa>0) resumoHTML+="<br>Taxa: R$5,00";
resumoHTML+="<br><strong>Total Final: R$"+final.toFixed(2)+"</strong>";

document.getElementById('resumo').innerHTML=resumoHTML;
}

function enviarPedido(){

let texto="NOVO PEDIDO%0A%0A";

texto+="Nome: "+nome.value+"%0A";
texto+="Endereço: "+endereco.value+"%0A";
texto+="Bairro: "+bairro.value+"%0A";
texto+="Referência: "+referencia.value+"%0A%0A";

texto+=document.getElementById('resumo').innerText.replace(/\n/g,"%0A");

let url="https://wa.me/5521969592922?text="+texto;
window.open(url);

}

</script>

</body>
</html>