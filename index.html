<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Card치pio Digital</title>
<style>
body{margin:0;font-family:Arial,sans-serif;background:#fff;color:#333;overflow-x:hidden;}
header{background:#d90429;color:white;padding:20px;text-align:center;font-size:22px;font-weight:bold;}
h2{margin-top:20px;color:#d90429;}
.etapa{position:absolute;width:100%;top:80px;left:0;padding:15px;opacity:0;transform:translateX(100%);transition:0.4s ease;}
.ativa{opacity:1;transform:translateX(0);position:relative;}
.produto{background:#fff;border:2px solid #d90429;margin:10px 0;border-radius:10px;padding:10px;box-shadow:0 3px 8px rgba(0,0,0,0.1);}
.produto-info{margin-bottom:5px;}
.produto-contador{display:flex;align-items:center;gap:3px;margin-top:5px;}
.produto-contador button{background:#d90429;color:white;border:none;padding:2px 6px;border-radius:5px;font-weight:bold;font-size:12px;}
.produto-contador span{min-width:20px;text-align:center;display:inline-block;}
select{width:100%;padding:5px;margin-top:5px;border:1px solid #ccc;border-radius:5px;font-size:14px;}
button{background:#d90429;color:white;border:none;padding:8px;border-radius:6px;width:100%;margin-top:10px;font-weight:bold;font-size:14px;}
button.voltar{background:#aaa;}
input{width:100%;padding:8px;margin-top:8px;border:1px solid #ccc;border-radius:5px;font-size:14px;}
.total{text-align:right;font-weight:bold;margin-top:10px;font-size:16px;}
</style>
</head>
<body>

<header>游 Empad칚o do Alessandro</header>

<!-- ETAPA 1 - Card치pio -->
<div id="etapa1" class="etapa ativa">

<h2>Empad칫es</h2>

<div class="produto">
<div class="produto-info">
<h3>Empad칚o de Frango com Requeij칚o</h3>
<p>R$ 20,00</p>
<label>Milho:</label>
<select id="milho_frango_requeijao">
<option value="false">Sem Milho</option>
<option value="true">Com Milho</option>
</select>
</div>
<div class="produto-contador">
<button onclick="alterar('frango_requeijao',20,-1)">-</button>
<span id="qtd_frango_requeijao">0</span>
<button onclick="alterar('frango_requeijao',20,1)">+</button>
</div>
<p id="total_frango_requeijao">R$ 0,00</p>
</div>

<div class="produto">
<div class="produto-info">
<h3>Empad칚o de Frango com Catupiry</h3>
<p>R$ 22,00</p>
<label>Milho:</label>
<select id="milho_frango_catupiry">
<option value="false">Sem Milho</option>
<option value="true">Com Milho</option>
</select>
</div>
<div class="produto-contador">
<button onclick="alterar('frango_catupiry',22,-1)">-</button>
<span id="qtd_frango_catupiry">0</span>
<button onclick="alterar('frango_catupiry',22,1)">+</button>
</div>
<p id="total_frango_catupiry">R$ 0,00</p>
</div>

<div class="produto">
<div class="produto-info">
<h3>Empad칚o de Frango Simples</h3>
<p>R$ 18,00</p>
<label>Milho:</label>
<select id="milho_frango_simples">
<option value="false">Sem Milho</option>
<option value="true">Com Milho</option>
</select>
</div>
<div class="produto-contador">
<button onclick="alterar('frango_simples',18,-1)">-</button>
<span id="qtd_frango_simples">0</span>
<button onclick="alterar('frango_simples',18,1)">+</button>
</div>
<p id="total_frango_simples">R$ 0,00</p>
</div>

<h2>Bebidas</h2>

<div class="produto">
<div class="produto-info">
<h3>Guaracrack</h3>
<p>R$ 6,00</p>
</div>
<div class="produto-contador">
<button onclick="alterar('guaracrack',6,-1)">-</button>
<span id="qtd_guaracrack">0</span>
<button onclick="alterar('guaracrack',6,1)">+</button>
</div>
<p id="total_guaracrack">R$ 0,00</p>
</div>

<div class="produto">
<div class="produto-info">
<h3>Coca-Cola Lata</h3>
<p>R$ 6,00</p>
</div>
<div class="produto-contador">
<button onclick="alterar('coca_lata',6,-1)">-</button>
<span id="qtd_coca_lata">0</span>
<button onclick="alterar('coca_lata',6,1)">+</button>
</div>
<p id="total_coca_lata">R$ 0,00</p>
</div>

<div class="produto">
<div class="produto-info">
<h3>Guaran치 Lata 550ml</h3>
<p>R$ 6,00</p>
</div>
<div class="produto-contador">
<button onclick="alterar('guarana_lata',6,-1)">-</button>
<span id="qtd_guarana_lata">0</span>
<button onclick="alterar('guarana_lata',6,1)">+</button>
</div>
<p id="total_guarana_lata">R$ 0,00</p>
</div>

<div class="total">
Subtotal: R$ <span id="subtotal1">0.00</span>
</div>
<button onclick="irPara(2)">Continuar</button>
</div>

<!-- ETAPA 2 - Dados -->
<div id="etapa2" class="etapa">
<label>Nome:</label>
<input type="text" id="nome">
<label>Telefone:</label>
<input type="text" id="telefone">
<label>Endere칞o:</label>
<input type="text" id="endereco">
<button onclick="pegarEndereco()">游늸 Usar localiza칞칚o real</button>
<label>Bairro:</label>
<input type="text" id="bairro">
<label>Cidade:</label>
<input type="text" id="cidade">
<label>CEP:</label>
<input type="text" id="cep">
<label>Observa칞칚o:</label>
<input type="text" id="obs">
<button class="voltar" onclick="irPara(1)">Voltar</button>
<button onclick="irPara(3)">Continuar</button>
</div>

<!-- ETAPA 3 - Pagamento -->
<div id="etapa3" class="etapa">
<label>Cupom:</label>
<input type="text" id="cupom">
<button onclick="aplicarCupom()">Aplicar Cupom</button>
<div class="total">
Subtotal: R$ <span id="subtotal">0.00</span><br>
Desconto: R$ <span id="desconto">0.00</span><br>
Total: R$ <span id="total">0.00</span>
</div>
<label>Forma de pagamento:</label>
<select id="pagamento" onchange="verificarPagamento()">
<option>Pix</option>
<option>Cart칚o</option>
<option>Dinheiro</option>
</select>
<div id="campoTroco" style="display:none;">
<label>Troco para:</label>
<input type="text" id="troco">
</div>
<button class="voltar" onclick="irPara(2)">Voltar</button>
<button onclick="finalizar()">Enviar Pedido</button>
</div>

<script>
// Carrinho
let carrinho={
frango_requeijao:{nome:"Empad칚o de Frango com Requeij칚o",preco:20,qtd:0,milho:false},
frango_catupiry:{nome:"Empad칚o de Frango com Catupiry",preco:22,qtd:0,milho:false},
frango_simples:{nome:"Empad칚o de Frango Simples",preco:18,qtd:0,milho:false},
guaracrack:{nome:"Guaracrack",preco:6,qtd:0},
coca_lata:{nome:"Coca-Cola Lata",preco:6,qtd:0},
guarana_lata:{nome:"Guaran치 Lata 550ml",preco:6,qtd:0}
};
let desconto=0;

function alterar(id,preco,valor){
carrinho[id].qtd+=valor;
if(carrinho[id].qtd<0)carrinho[id].qtd=0;
if(id.includes("frango")){carrinho[id].milho=document.getElementById("milho_"+id).value==="true";}
document.getElementById("qtd_"+id).innerText=carrinho[id].qtd;
document.getElementById("total_"+id).innerText="R$ "+(carrinho[id].qtd*preco).toFixed(2);
atualizar();
}

function calcularSubtotal(){
let soma=0;
for(let item in carrinho){soma+=carrinho[item].qtd*carrinho[item].preco;}
return soma;
}

function atualizar(){
let subtotal=calcularSubtotal();
document.getElementById("subtotal1").innerText=subtotal.toFixed(2);
document.getElementById("subtotal").innerText=subtotal.toFixed(2);
document.getElementById("desconto").innerText=desconto.toFixed(2);
document.getElementById("total").innerText=(subtotal-desconto).toFixed(2);
}

function aplicarCupom(){
let cupom=document.getElementById("cupom").value;
let subtotal=calcularSubtotal();
if(cupom==="DESCONTO10"){desconto=subtotal*0.10;}else{desconto=0;alert("Cupom inv치lido");}
atualizar();
}

function irPara(num){
document.querySelectorAll(".etapa").forEach(div=>div.classList.remove("ativa"));
document.getElementById("etapa"+num).classList.add("ativa");
atualizar();
}

function verificarPagamento(){
let pagamento=document.getElementById("pagamento").value;
document.getElementById("campoTroco").style.display=(pagamento==="Dinheiro")?"block":"none";
}

// Localiza칞칚o real completa
function pegarEndereco(){
if(navigator.geolocation){
navigator.geolocation.getCurrentPosition(function(pos){
let lat=pos.coords.latitude;
let lng=pos.coords.longitude;
fetch(`https://nominatim.openstreetmap.org/reverse?lat=${lat}&lon=${lng}&format=json`)
.then(res=>res.json())
.then(data=>{
if(data.address){
let rua = data.address.road || data.address.pedestrian || data.address.footway || "";
let numero = data.address.house_number || "";
let bairro = data.address.suburb || data.address.neighbourhood || "";
let cidade = data.address.city || data.address.town || data.address.village || "";
let cep = data.address.postcode || "";
document.getElementById("endereco").value = rua + (numero?" ,"+numero:"");
document.getElementById("bairro").value = bairro;
document.getElementById("cidade").value = cidade;
document.getElementById("cep").value = cep;
}else{alert("N칚o foi poss칤vel obter o endere칞o.");}
}).catch(()=>alert("Erro ao buscar endere칞o."));
}, function(err){alert("N칚o foi poss칤vel obter a localiza칞칚o.");});
}else{alert("Seu dispositivo n칚o suporta GPS.");}
}

function finalizar(){
let subtotal=calcularSubtotal();
let totalFinal=(subtotal-desconto).toFixed(2);
let mensagem="*NOVO PEDIDO*%0A%0A";
mensagem+="Nome: "+nome.value+"%0A";
mensagem+="Telefone: "+telefone.value+"%0A";
mensagem+="Endere칞o: "+endereco.value+"%0A";
mensagem+="Bairro: "+bairro.value+"%0A";
mensagem+="Cidade: "+cidade.value+"%0A";
mensagem+="CEP: "+cep.value+"%0A";
mensagem+="Obs: "+obs.value+"%0A%0A";
mensagem+="*Itens:*%0A";
for(let item in carrinho){
if(carrinho[item].qtd>0){
let milho=carrinho[item].milho?" (com milho)":" (sem milho)";
mensagem+=carrinho[item].nome+(carrinho[item].milho!==undefined?milho:"")+" x"+carrinho[item].qtd+" = R$ "+(carrinho[item].qtd*carrinho[item].preco).toFixed(2)+"%0A";
}
}
mensagem+="%0ATotal: R$ "+totalFinal+"%0A";
mensagem+="Pagamento: "+pagamento.value+"%0A";
if(pagamento.value==="Dinheiro"){mensagem+="Troco para: "+troco.value+"%0A";}
window.open("https://wa.me/5521999999999?text="+mensagem);
}
</script>
</body>
</html>