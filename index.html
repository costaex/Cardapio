<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cantinho do Empad√£o</title>
<style>
body{margin:0;font-family:Arial,sans-serif;background:#fff;color:#333;}
header{background:#d90429;color:white;padding:15px;text-align:center;display:flex;flex-direction:column;align-items:center;}
header img{height:150px;border-radius:10px;margin-top:10px;}
header h1{margin:0;color:white;}
h2{margin-top:15px;color:#fff;background:#d90429;padding:5px;border-radius:5px;}
.step{display:none;}
.produto{background:#fff;border:2px solid #d90429;margin:5px 0;border-radius:10px;padding:8px;box-shadow:0 2px 5px rgba(0,0,0,0.1);}
.produto-info{margin-bottom:5px;font-size:13px;}
.produto-contador{display:flex;align-items:center;gap:2px;margin-top:3px;}
.produto-contador button{
    background:#d90429;color:white;border:none;padding:2px 4px;border-radius:4px;font-weight:bold;font-size:10px;width:22px;
    transition:0.2s;
}
.produto-contador button:hover{transform:scale(1.2);}
.produto-contador span{min-width:20px;text-align:center;display:inline-block;font-size:10px;}
select{width:100%;padding:4px;margin-top:3px;border:1px solid #ccc;border-radius:5px;font-size:12px;}
button{background:#d90429;color:white;border:none;padding:8px;border-radius:6px;width:100%;margin-top:8px;font-weight:bold;font-size:14px;transition:0.2s;}
button:hover{opacity:0.9;transform:scale(1.02);}
button.voltar{background:#aaa;}
input{width:100%;padding:6px;margin-top:6px;border:1px solid #ccc;border-radius:5px;font-size:12px;}
.total{text-align:right;font-weight:bold;margin-top:8px;font-size:16px;color:#d90429;}
#fechado{display:none;text-align:center;margin-top:50px;font-size:18px;color:#d90429;}
#horarios{margin-top:10px;text-align:center;font-size:14px;}
#mensagemFinal{display:none;text-align:center;margin-top:20px;font-size:18px;color:green;}
</style>
</head>
<body>

<header>
<h1>ü•ü Cantinho do Empad√£o</h1>
<img src="Logoep.jpg" alt="Logo">
</header>

<div id="fechado">
‚ùå No momento estamos fechados. Confira nosso hor√°rio de funcionamento:
<div id="horarios"></div>
</div>

<!-- Etapa 1: Pedido -->
<div id="step1" class="step">
<h2>Escolha seus produtos</h2>

<h3>Empad√µes</h3>

<div class="produto">
  <div class="produto-info">
    <h4>Empad√£o de Frango com Requeij√£o - R$20,00</h4>
    <label>Milho:</label>
    <select id="milho_frango_requeijao">
      <option value="false">Sem Milho</option>
      <option value="true">Com Milho</option>
    </select>
  </div>
  <div class="produto-contador">
    <button onclick="alterar('frango_requeijao',20,-1)">-</button>
    <span id="qtd_frango_requeijao">0</span>
    <button onclick="alterar('frango_requeijao',20,1)">+</button>
  </div>
  <p id="total_frango_requeijao">R$ 0,00</p>
</div>

<div class="produto">
  <div class="produto-info">
    <h4>Empad√£o de Frango com Catupiry - R$22,00</h4>
    <label>Milho:</label>
    <select id="milho_frango_catupiry">
      <option value="false">Sem Milho</option>
      <option value="true">Com Milho</option>
    </select>
  </div>
  <div class="produto-contador">
    <button onclick="alterar('frango_catupiry',22,-1)">-</button>
    <span id="qtd_frango_catupiry">0</span>
    <button onclick="alterar('frango_catupiry',22,1)">+</button>
  </div>
  <p id="total_frango_catupiry">R$ 0,00</p>
</div>

<div class="produto">
  <div class="produto-info">
    <h4>Empad√£o de Frango simples - R$18,00</h4>
    <label>Milho:</label>
    <select id="milho_frango_simples">
      <option value="false">Sem Milho</option>
      <option value="true">Com Milho</option>
    </select>
  </div>
  <div class="produto-contador">
    <button onclick="alterar('frango_simples',18,-1)">-</button>
    <span id="qtd_frango_simples">0</span>
    <button onclick="alterar('frango_simples',18,1)">+</button>
  </div>
  <p id="total_frango_simples">R$ 0,00</p>
</div>

<h3>Bebidas</h3>

<div class="produto">
  <div class="produto-info">
    <h4>Guaracrack - R$7,00</h4>
  </div>
  <div class="produto-contador">
    <button onclick="alterar('guaracrack',7,-1)">-</button>
    <span id="qtd_guaracrack">0</span>
    <button onclick="alterar('guaracrack',7,1)">+</button>
  </div>
  <p id="total_guaracrack">R$ 0,00</p>
</div>

<div class="produto">
  <div class="produto-info">
    <h4>Coca-Cola Lata 550ml - R$6,00</h4>
  </div>
  <div class="produto-contador">
    <button onclick="alterar('coca550',6,-1)">-</button>
    <span id="qtd_coca550">0</span>
    <button onclick="alterar('coca550',6,1)">+</button>
  </div>
  <p id="total_coca550">R$ 0,00</p>
</div>

<div class="produto">
  <div class="produto-info">
    <h4>Guaran√° Lata 550ml - R$6,00</h4>
  </div>
  <div class="produto-contador">
    <button onclick="alterar('guarana550',6,-1)">-</button>
    <span id="qtd_guarana550">0</span>
    <button onclick="alterar('guarana550',6,1)">+</button>
  </div>
  <p id="total_guarana550">R$ 0,00</p>
</div>

<p class="total" id="totalPedido">Total: R$ 0,00</p>
<button onclick="proximaEtapa(2)">‚û° Continuar</button>
</div>

<!-- Etapa 2: Dados do cliente -->
<div id="step2" class="step">
<h2>Informa√ß√µes de entrega</h2>
<input type="text" id="nome" placeholder="Nome completo">
<input type="text" id="telefone" placeholder="Telefone">
<input type="text" id="endereco" placeholder="Endere√ßo completo (rua, n√∫mero, bairro)">
<button class="voltar" onclick="proximaEtapa(1)">‚¨Ö Voltar</button>
<button onclick="proximaEtapa(3)">‚û° Continuar</button>
</div>

<!-- Etapa 3: Pagamento -->
<div id="step3" class="step">
<h2>Pagamento</h2>
<select id="pagamento" onchange="verTroco()">
  <option value="dinheiro">Dinheiro</option>
  <option value="cartao">Cart√£o</option>
  <option value="pix">Pix</option>
</select>
<input type="number" id="troco" placeholder="Troco para quanto?" style="display:none">
<button class="voltar" onclick="proximaEtapa(2)">‚¨Ö Voltar</button>
<button onclick="confirmarPedido()">‚úÖ Confirmar Pedido</button>
</div>

<div id="mensagemFinal">üéâ Obrigado pela compra! Seu pedido foi enviado com sucesso.</div>

<script>
// Hor√°rios
const horarios = {
    "0":["17:00","23:00"],"1":null,"2":["17:00","23:00"],"3":["19:00","23:30"],"4":["19:00","23:30"],"5":["19:00","23:30"],"6":["17:00","23:00"]
};
const horariosTexto = ["Domingo: 17:00 - 23:00","Segunda-feira: Fechada","Ter√ßa-feira: 17:00 - 23:00","Quarta-feira: 19:00 - 23:30","Quinta-feira: 19:00 - 23:30","Sexta-feira: 19:00 - 23:30","S√°bado: 17:00 - 23:00"];

// Acesso admin
const acessoAdm = new URLSearchParams(window.location.search).get('adm')==='1234';

function pad(n){ return n<10 ? '0'+n : n; }

function conferirHorario(){
    const agora = new Date();
    const dia = agora.getDay();
    const hora = agora.getHours();
    const min = agora.getMinutes();
    const horarioAtual = parseFloat(pad(hora)+'.'+pad(min));
    const abertura = horarios[dia]?parseFloat(horarios[dia][0].replace(':','.')):null;
    const fechamento = horarios[dia]?parseFloat(horarios[dia][1].replace(':','.')):null;
    if((abertura && horarioAtual>=abertura && horarioAtual<=fechamento) || acessoAdm){
        document.getElementById('step1').style.display='block';
        atualizarTotal();
    } else {
        document.getElementById('fechado').style.display='block';
        document.getElementById('horarios').innerHTML=horariosTexto.join('<br>');
    }
}

// Etapas
function proximaEtapa(n){
    document.querySelectorAll('.step').forEach(s=>s.style.display='none');
    document.getElementById('step'+n).style.display='block';
}

// Contadores
function alterar(id,preco,quant){
    const qtdElem=document.getElementById("qtd_"+id);
    const totalElem=document.getElementById("total_"+id);
    let qtd=parseInt(qtdElem.innerText)+quant;
    if(qtd<0) qtd=0;
    qtdElem.innerText=qtd;
    totalElem.innerText="R$ "+(qtd*preco).toFixed(2);
    atualizarTotal();
}

// Atualiza total do pedido
function atualizarTotal(){
    const produtos=["frango_requeijao","frango_catupiry","frango_simples","guaracrack","coca550","guarana550"];
    let total=0;
    produtos.forEach(p=>{
        const qtd=parseInt(document.getElementById("qtd_"+p).innerText);
        const preco=parseFloat(document.getElementById("total_"+p).innerText.replace('R$ ',''));
        total+=preco;
    });
    document.getElementById('totalPedido').innerText="Total: R$ "+total.toFixed(2);
}

// Troco
function verTroco(){
    const tp=document.getElementById('pagamento').value;
    document.getElementById('troco').style.display=(tp==='dinheiro')?'block':'none';
}

// Confirmar pedido
function confirmarPedido(){
    enviarWhatsApp();
    document.getElementById('step3').style.display='none';
    document.getElementById('mensagemFinal').style.display='block';
}

// WhatsApp
function enviarWhatsApp(){
    const numero="5521969592922";
    let msg="Ol√°, quero fazer um pedido:\n";
    const produtos=["frango_requeijao","frango_catupiry","frango_simples","guaracrack","coca550","guarana550"];
    produtos.forEach(p=>{
        const qtd=parseInt(document.getElementById("qtd_"+p).innerText);
        if(qtd>0){
            const milho=document.getElementById("milho_"+p)? (document.getElementById("milho_"+p).value==="true"?" com milho":" sem milho"):"";
            const nomeFinal=p=="frango_requeijao"?"Empad√£o de Frango com Requeij√£o":p=="frango_catupiry"?"Empad√£o de Frango com Catupiry":p=="frango_simples"?"Empad√£o de Frango simples":p;
            msg+="- "+nomeFinal+milho+" x "+qtd+"\n";
        }
    });
    const nome=document.getElementById('nome').value;
    const telefone=document.getElementById('telefone').value;
    const endereco=document.getElementById('endereco').value;
    const pagamento=document.getElementById('pagamento').value;
    const troco=document.getElementById('troco').value;
    msg+="\nNome: "+nome+"\nTelefone: "+telefone+"\nEndere√ßo: "+endereco+"\nPagamento: "+pagamento;
    if(troco && pagamento==='dinheiro') msg+="\nTroco para: R$ "+troco;
    const url="https://wa.me/"+numero+"?text="+encodeURIComponent(msg);
    window.open(url,"_blank");
}

window.onload=conferirHorario;
</script>
</body>
</html>