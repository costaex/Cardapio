<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cantinho do Empad√£o</title>

<style>
body{
font-family:'Segoe UI',Arial;
margin:0;
background:linear-gradient(180deg,#5a2d0c,#3b1d08);
color:#fff;
}
header{text-align:center;padding:20px 10px;}
header img{width:170px;}
header h2{margin:5px 0 0;}
.status{text-align:center;font-weight:bold;padding:10px;font-size:15px;}
.aberto{background:#2ecc71;}
.fechado{background:#e74c3c;}
.horario-box{background:#d4a017;color:#000;padding:15px;border-radius:12px;margin:15px;font-size:14px;}
.container{padding:15px;padding-bottom:120px;}
.promocao{background:#d4a017;color:#000;padding:6px;text-align:center;font-weight:bold;border-radius:10px;margin-bottom:8px;}
.card{background:#fff;color:#333;padding:15px;margin-bottom:15px;border-radius:15px;box-shadow:0 6px 18px rgba(0,0,0,0.25);}
.card h4{margin:0;color:#5a2d0c;}
.descricao{font-size:13px;margin:8px 0;color:#555;}
button{background:#d4a017;color:#000;border:none;padding:10px;border-radius:8px;font-weight:bold;cursor:pointer;margin-top:8px;}
.nav-buttons{display:flex;gap:10px;margin-top:20px;}
.etapa{display:none;}
.etapa.ativa{display:block;}
.carrinho-total{position:fixed;bottom:0;left:0;right:0;background:#d4a017;color:#000;padding:15px;text-align:center;font-weight:bold;font-size:18px;}
.item-carrinho{background:#fff;color:#000;padding:8px;margin-bottom:5px;border-radius:8px;display:flex;justify-content:space-between;align-items:center;}
.lixeira{cursor:pointer;font-size:18px;}
input,select{width:100%;padding:10px;border-radius:8px;border:none;margin-bottom:10px;}
</style>
</head>
<body>

<header>
<img src="Logoep.jpg">
<h2>Cantinho do Empad√£o</h2>
</header>

<div id="statusLoja" class="status"></div>

<div class="horario-box">
<strong>Nosso hor√°rio de funcionamento:</strong><br>
‚Ä¢ üïî Domingo: 17:00 - 23:00<br>
‚Ä¢ üö´ Segunda-feira: Fechada<br>
‚Ä¢ üïî Ter√ßa-feira: 17:00 - 23:00<br>
‚Ä¢ üïñ Quarta-feira: 19:00 - 23:30<br>
‚Ä¢ üïñ Quinta-feira: 19:00 - 23:30<br>
‚Ä¢ üïñ Sexta-feira: 19:00 - 23:30<br>
‚Ä¢ üïî S√°bado: 17:00 - 23:00
</div>

<div class="container">

<div class="etapa ativa" id="etapa1">
<h3>Etapa 1 - Escolher Itens</h3>

<h4>üî• Promo√ß√£o</h4>

<div class="promocao">PROMO√á√ÉO ESPECIAL</div>
<div class="card">
<h4>Empad√£o Catupiry (500g) + Guaracrack - R$17,99</h4>
<div class="descricao">Massa amanteigada feita com Qualy e trigo premium.</div>
<label><input type="radio" name="milhoPromo" value="com milho"> Com milho</label>
<label><input type="radio" name="milhoPromo" value="sem milho"> Sem milho</label>
<button onclick="adicionarItem('Combo Catupiry 500g + Guaracrack',17.99,'milhoPromo')">Adicionar</button>
</div>

<h4>Empad√µes 500g</h4>

<div class="card">
<h4>Frango Cremoso com Requeij√£o (500g) - R$16,99</h4>
<label><input type="radio" name="milho1" value="com milho"> Com milho</label>
<label><input type="radio" name="milho1" value="sem milho"> Sem milho</label>
<button onclick="adicionarItem('Empad√£o Frango Requeij√£o 500g',16.99,'milho1')">Adicionar</button>
</div>

<div class="card">
<h4>Frango Cremoso com Catupiry (500g) - R$16,99</h4>
<label><input type="radio" name="milho2" value="com milho"> Com milho</label>
<label><input type="radio" name="milho2" value="sem milho"> Sem milho</label>
<button onclick="adicionarItem('Empad√£o Frango Catupiry 500g',16.99,'milho2')">Adicionar</button>
</div>

<h4>Empad√µes 150g</h4>

<div class="card">
<h4>Frango Cremoso com Requeij√£o (150g) - R$11,99</h4>
<label><input type="radio" name="milho150a" value="com milho"> Com milho</label>
<label><input type="radio" name="milho150a" value="sem milho"> Sem milho</label>
<button onclick="adicionarItem('Empad√£o Frango Requeij√£o 150g',11.99,'milho150a')">Adicionar</button>
</div>

<div class="card">
<h4>Frango Cremoso com Catupiry (150g) - R$11,99</h4>
<label><input type="radio" name="milho150b" value="com milho"> Com milho</label>
<label><input type="radio" name="milho150b" value="sem milho"> Sem milho</label>
<button onclick="adicionarItem('Empad√£o Frango Catupiry 150g',11.99,'milho150b')">Adicionar</button>
</div>

<div class="card">
<h4>Empad√£o Catupiry (150g) + Guaracrack - R$11,49</h4>
<button onclick="adicionarItem('Combo Catupiry 150g + Guaracrack',11.49,null)">Adicionar</button>
</div>

<h4>Combos 500g</h4>

<div class="card">
<h4>Empad√£o Catupiry (500g) + Coca Lata - R$20,99</h4>
<button onclick="adicionarItem('Combo Catupiry 500g + Coca Lata',20.99,null)">Adicionar</button>
</div>

<div class="card">
<h4>Empad√£o Requeij√£o (500g) + Guaran√° Lata - R$20,99</h4>
<button onclick="adicionarItem('Combo Requeij√£o 500g + Guaran√° Lata',20.99,null)">Adicionar</button>
</div>

<!-- ETAPA 2 -->
<div class="etapa" id="etapa2">
<h3>Etapa 2 - Endere√ßo</h3>
<input type="text" id="nome" placeholder="Nome">
<input type="text" id="endereco" placeholder="Endere√ßo">
<input type="text" id="bairro" placeholder="Bairro">
<input type="text" id="referencia" placeholder="Ponto de refer√™ncia">

<div class="nav-buttons">
<button onclick="voltar(1)">Voltar</button>
<button onclick="proxima(3)">Pr√≥xima</button>
</div>
</div>

<!-- ETAPA 3 -->
<div class="etapa" id="etapa3">
<h3>Etapa 3 - Forma de Pagamento</h3>

<select id="pagamento" onchange="verificarPagamento()">
<option value="D√©bito">D√©bito</option>
<option value="Cr√©dito">Cr√©dito</option>
<option value="Dinheiro">Dinheiro</option>
<option value="Pix">Pix</option>
</select>

<div id="trocoDiv" style="display:none;">
Precisa de troco?
<input type="text" id="troco">
</div>

<div id="pixDiv" style="display:none;">
Chave Pix: 48092363000120<br>
‚ö†Ô∏è Enviar comprovante para o pedido ser preparado.
</div>

<div class="nav-buttons">
<button onclick="voltar(2)">Voltar</button>
<button onclick="proxima(4)">Pr√≥xima</button>
</div>
</div>

<!-- ETAPA 4 -->
<div class="etapa" id="etapa4">
<h3>Etapa 4 - Resumo</h3>
<div id="resumo"></div>

<div class="nav-buttons">
<button onclick="voltar(3)">Voltar</button>
<button onclick="enviarPedido()">Finalizar Pedido</button>
</div>
</div>

</div>

<div class="carrinho-total">
Total: R$ <span id="total">0.00</span>
</div>

<script>
let carrinho=[];

/* MODO ADMIN */
const SENHA="1442";
let params=new URLSearchParams(window.location.search);
let modoAdmin=params.get("adm")===SENHA;

function obterHorarioHoje(){
let dia=new Date().getDay();
if(dia==1) return null;
if(dia==0) return {inicio:17,fim:23};
if(dia==2) return {inicio:17,fim:23};
if(dia==3) return {inicio:19,fim:23.5};
if(dia==4) return {inicio:19,fim:23.5};
if(dia==5) return {inicio:19,fim:23.5};
if(dia==6) return {inicio:17,fim:23};
return null;
}

function dentroDoHorario(){
if(modoAdmin) return true;
let h=obterHorarioHoje();
if(!h) return false;
let agora=new Date();
let atual=agora.getHours()+(agora.getMinutes()/60);
return atual>=h.inicio && atual<=h.fim;
}

function atualizarStatus(){
let status=document.getElementById("statusLoja");
if(modoAdmin){
status.innerHTML="üõ† MODO ADMIN ATIVO";
status.className="status aberto";
return;
}
if(dentroDoHorario()){
status.innerHTML="üü¢ Estamos Abertos";
status.className="status aberto";
}else{
status.innerHTML="üî¥ Estamos Fechados";
status.className="status fechado";
}
}

function bloquear(){
if(!dentroDoHorario()){
alert("Estamos fechados no momento.");
return true;
}
return false;
}

function adicionarItem(nome,preco,tipoMilho){
if(bloquear()) return;
let opcao="";
if(tipoMilho){
let milho=document.querySelector('input[name="'+tipoMilho+'"]:checked');
if(milho) opcao=" ("+milho.value+")";
}
carrinho.push({nome:nome+opcao,preco:preco});
renderCarrinho();
}

function removerItem(i){
carrinho.splice(i,1);
renderCarrinho();
}

function renderCarrinho(){
let lista=document.getElementById("listaCarrinho");
lista.innerHTML="";
let total=0;
carrinho.forEach((item,i)=>{
total+=item.preco;
lista.innerHTML+=`
<div class="item-carrinho">
<span>${item.nome} - R$${item.preco.toFixed(2)}</span>
<span class="lixeira" onclick="removerItem(${i})">üóë</span>
</div>`;
});
document.getElementById("total").innerText=total.toFixed(2);
}

function proxima(n){
if(bloquear()) return;
document.querySelectorAll('.etapa').forEach(e=>e.classList.remove('ativa'));
document.getElementById('etapa'+n).classList.add('ativa');
if(n==4) gerarResumo();
}

function voltar(n){
document.querySelectorAll('.etapa').forEach(e=>e.classList.remove('ativa'));
document.getElementById('etapa'+n).classList.add('ativa');
}

function verificarPagamento(){
let pag=pagamento.value;
trocoDiv.style.display=(pag=="Dinheiro")?"block":"none";
pixDiv.style.display=(pag=="Pix")?"block":"none";
}

function gerarResumo(){
let total=parseFloat(document.getElementById("total").innerText);
let taxa=(bairro.value.toLowerCase()=="marambaia")?0:5;

if(total<18){
alert("Pedido m√≠nimo R$18");
voltar(1);
return;
}

let final=total+taxa;
let texto="NOVO PEDIDO\n\n";
carrinho.forEach(item=> texto+="1x "+item.nome+"\n");
texto+="\nSubtotal: R$"+total.toFixed(2);
if(taxa>0) texto+="\nTAXA DE ENTREGA: R$5,00";
texto+="\nTotal: R$"+final.toFixed(2);

document.getElementById("resumo").innerText=texto;
}

function enviarPedido(){
if(bloquear()) return;
let texto=document.getElementById("resumo").innerText;
texto+="\n\nNome: "+nome.value;
texto+="\nEndere√ßo: "+endereco.value;
texto+="\nBairro: "+bairro.value;
texto+="\nRefer√™ncia: "+referencia.value;
texto+="\nPagamento: "+pagamento.value;
if(troco.value) texto+="\nTroco para: "+troco.value;

window.open("https://wa.me/5521969592922?text="+encodeURIComponent(texto));
}

atualizarStatus();
setInterval(atualizarStatus,60000);
</script>

</body>
</html>