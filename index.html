<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Card√°pio Digital</title>
<style>
body{margin:0;font-family:Arial,sans-serif;background:#fff;color:#333;overflow-x:hidden;}
header{background:#d90429;color:white;padding:20px;text-align:center;font-size:22px;font-weight:bold;}
.etapa{position:absolute;width:100%;top:80px;left:0;padding:15px;opacity:0;transform:translateX(100%);transition:0.4s ease;}
.ativa{opacity:1;transform:translateX(0);position:relative;}
.produto{background:#fff;border:2px solid #d90429;margin:10px 0;border-radius:10px;padding:10px;box-shadow:0 3px 8px rgba(0,0,0,0.1);}
.produto-info{margin-bottom:8px;}
.produto-contador{display:flex;align-items:center;gap:5px;margin-top:5px;}
.produto-contador button{background:#d90429;color:white;border:none;padding:6px 12px;border-radius:6px;font-weight:bold;}
select{width:100%;padding:6px;margin-top:5px;border:1px solid #ccc;border-radius:5px;}
button{background:#d90429;color:white;border:none;padding:10px;border-radius:6px;width:100%;margin-top:10px;font-weight:bold;}
button.voltar{background:#aaa;}
input{width:100%;padding:8px;margin-top:8px;border:1px solid #ccc;border-radius:5px;}
.total{text-align:right;font-weight:bold;margin-top:10px;}
</style>
</head>
<body>

<header>ü•ü Empad√£o do Alessandro</header>

<!-- ETAPA 1 -->
<div id="etapa1" class="etapa ativa">

<div class="produto">
<div class="produto-info">
<h3>Empad√£o de Frango com Requeij√£o</h3>
<p>R$ 20,00</p>
<label>Milho:</label>
<select id="milho_frango_requeijao">
<option value="false">Sem Milho</option>
<option value="true">Com Milho</option>
</select>
</div>
<div class="produto-contador">
<button onclick="alterar('frango_requeijao',20,-1)">-</button>
<span id="qtd_frango_requeijao">0</span>
<button onclick="alterar('frango_requeijao',20,1)">+</button>
</div>
<p id="total_frango_requeijao">R$ 0,00</p>
</div>

<div class="produto">
<div class="produto-info">
<h3>Empad√£o de Frango com Catupiry</h3>
<p>R$ 22,00</p>
<label>Milho:</label>
<select id="milho_frango_catupiry">
<option value="false">Sem Milho</option>
<option value="true">Com Milho</option>
</select>
</div>
<div class="produto-contador">
<button onclick="alterar('frango_catupiry',22,-1)">-</button>
<span id="qtd_frango_catupiry">0</span>
<button onclick="alterar('frango_catupiry',22,1)">+</button>
</div>
<p id="total_frango_catupiry">R$ 0,00</p>
</div>

<div class="produto">
<div class="produto-info">
<h3>Empad√£o de Frango Simples</h3>
<p>R$ 18,00</p>
<label>Milho:</label>
<select id="milho_frango_simples">
<option value="false">Sem Milho</option>
<option value="true">Com Milho</option>
</select>
</div>
<div class="produto-contador">
<button onclick="alterar('frango_simples',18,-1)">-</button>
<span id="qtd_frango_simples">0</span>
<button onclick="alterar('frango_simples',18,1)">+</button>
</div>
<p id="total_frango_simples">R$ 0,00</p>
</div>

<div class="total">
Subtotal: R$ <span id="subtotal1">0.00</span>
</div>
<button onclick="irPara(2)">Continuar</button>
</div>

<!-- ETAPA 2 - Dados -->
<div id="etapa2" class="etapa">
<label>Nome:</label>
<input type="text" id="nome">
<label>Telefone:</label>
<input type="text" id="telefone">
<label>Endere√ßo:</label>
<input type="text" id="endereco">
<button onclick="pegarLocalizacao()">üìç Usar localiza√ß√£o atual</button>
<label>Bairro:</label>
<input type="text" id="bairro">
<label>Observa√ß√£o:</label>
<input type="text" id="obs">
<button class="voltar" onclick="irPara(1)">Voltar</button>
<button onclick="irPara(3)">Continuar</button>
</div>

<!-- ETAPA 3 - Pagamento -->
<div id="etapa3" class="etapa">
<label>Cupom:</label>
<input type="text" id="cupom">
<button onclick="aplicarCupom()">Aplicar Cupom</button>
<div class="total">
Subtotal: R$ <span id="subtotal">0.00</span><br>
Desconto: R$ <span id="desconto">0.00</span><br>
Total: R$ <span id="total">0.00</span>
</div>
<label>Forma de pagamento:</label>
<select id="pagamento" onchange="verificarPagamento()">
<option>Pix</option>
<option>Cart√£o</option>
<option>Dinheiro</option>
</select>
<div id="campoTroco" style="display:none;">
<label>Troco para:</label>
<input type="text" id="troco">
</div>
<button class="voltar" onclick="irPara(2)">Voltar</button>
<button onclick="finalizar()">Enviar Pedido</button>
</div>

<script>
// Carrinho
let carrinho={
frango_requeijao:{nome:"Empad√£o de Frango com Requeij√£o",preco:20,qtd:0,milho:false},
frango_catupiry:{nome:"Empad√£o de Frango com Catupiry",preco:22,qtd:0,milho:false},
frango_simples:{nome:"Empad√£o de Frango Simples",preco:18,qtd:0,milho:false}
};
let desconto=0;

function alterar(id,preco,valor){
carrinho[id].qtd+=valor;
if(carrinho[id].qtd<0)carrinho[id].qtd=0;
carrinho[id].milho=document.getElementById("milho_"+id).value==="true";
document.getElementById("qtd_"+id).innerText=carrinho[id].qtd;
document.getElementById("total_"+id).innerText="R$ "+(carrinho[id].qtd*preco).toFixed(2);
atualizar();
}

function calcularSubtotal(){
let soma=0;
for(let item in carrinho){soma+=carrinho[item].qtd*carrinho[item].preco;}
return soma;
}

function atualizar(){
let subtotal=calcularSubtotal();
document.getElementById("subtotal1").innerText=subtotal.toFixed(2);
document.getElementById("subtotal").innerText=subtotal.toFixed(2);
document.getElementById("desconto").innerText=desconto.toFixed(2);
document.getElementById("total").innerText=(subtotal-desconto).toFixed(2);
}

function aplicarCupom(){
let cupom=document.getElementById("cupom").value;
let subtotal=calcularSubtotal();
if(cupom==="DESCONTO10"){desconto=subtotal*0.10;}else{desconto=0;alert("Cupom inv√°lido");}
atualizar();
}

function irPara(num){
document.querySelectorAll(".etapa").forEach(div=>div.classList.remove("ativa"));
document.getElementById("etapa"+num).classList.add("ativa");
atualizar();
}

function verificarPagamento(){
let pagamento=document.getElementById("pagamento").value;
document.getElementById("campoTroco").style.display=(pagamento==="Dinheiro")?"block":"none";
}

function pegarLocalizacao(){
if(navigator.geolocation){
navigator.geolocation.getCurrentPosition(function(pos){
let lat=pos.coords.latitude;
let lng=pos.coords.longitude;
document.getElementById("endereco").value=`Rua Exemplo, ${Math.floor(Math.random()*100+1)}, GPS: ${lat.toFixed(5)},${lng.toFixed(5)}`;
alert("Endere√ßo preenchido automaticamente!");
},function(err){alert("N√£o foi poss√≠vel obter a localiza√ß√£o.");});
}else{alert("Seu dispositivo n√£o suporta GPS.");}
}

function finalizar(){
let subtotal=calcularSubtotal();
let totalFinal=(subtotal-desconto).toFixed(2);
let mensagem="*NOVO PEDIDO*%0A%0A";
mensagem+="Nome: "+nome.value+"%0A";
mensagem+="Telefone: "+telefone.value+"%0A";
mensagem+="Endere√ßo: "+endereco.value+"%0A";
mensagem+="Bairro: "+bairro.value+"%0A";
mensagem+="Obs: "+obs.value+"%0A%0A";
mensagem+="*Itens:*%0A";
for(let item in carrinho){
if(carrinho[item].qtd>0){
let milho=carrinho[item].milho?" (com milho)":" (sem milho)";
mensagem+=carrinho[item].nome+milho+" x"+carrinho[item].qtd+" = R$ "+(carrinho[item].qtd*carrinho[item].preco).toFixed(2)+"%0A";
}
}
mensagem+="%0ATotal: R$ "+totalFinal+"%0A";
mensagem+="Pagamento: "+pagamento.value+"%0A";
if(pagamento.value==="Dinheiro"){mensagem+="Troco para: "+troco.value+"%0A";}
window.open("https://wa.me/5521999999999?text="+mensagem);
}
</script>

</body>
</html>
